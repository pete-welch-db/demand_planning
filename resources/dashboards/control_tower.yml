# Databricks AI/BI Dashboard resource
# This deploys the dashboard JSON via `databricks bundle deploy`
# 
# On deploy:
#   - If dashboard doesn't exist: creates it
#   - If dashboard exists: updates it with the latest JSON
#
# Reference: https://docs.databricks.com/en/dev-tools/bundles/resources.html#dashboards

resources:
  dashboards:
    demand_planning_control_tower:
      display_name: "Demand Planning Control Tower"
      # Relative path from THIS file to the dashboard JSON
      # Go up 2 levels (resources/dashboards/) then into dashboards/
      file_path: ../../dashboards/demand_planning_control_tower.lvdash.json
      warehouse_id: ${var.warehouse_id}
      
      # Embed credentials for scheduled refresh (required for job refresh)
      embed_credentials: true
      
      # Optional: set permissions
      # permissions:
      #   - level: CAN_VIEW
      #     group_name: users
      #   - level: CAN_EDIT
      #     user_name: pete.welch@databricks.com
